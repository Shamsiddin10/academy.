<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Zamon Academy | Admin Control</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6366f1; --secondary: #a855f7; --accent: #f43f5e;
            --bg: #0b0f1a; --card-bg: rgba(30, 41, 59, 0.4); --text: #f8fafc;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Plus Jakarta Sans', sans-serif; }
        body { background: var(--bg); color: var(--text); overflow-x: hidden; min-height: 100vh; }

        /* --- AUTH SYSTEM --- */
        #authOverlay { position: fixed; inset: 0; background: radial-gradient(circle at 50% 50%, #1e1b4b, #0b0f1a); z-index: 3000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(20px); }
        .auth-card { background: rgba(255, 255, 255, 0.02); padding: 40px 30px; border-radius: 35px; border: 1px solid rgba(255, 255, 255, 0.1); width: 90%; max-width: 400px; text-align: center; }
        .input-box { width: 100%; padding: 14px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1); background: rgba(0,0,0,0.3); color: white; margin-bottom: 12px; outline: none; }
        .auth-btn { width: 100%; padding: 16px; border-radius: 14px; border: none; background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; font-weight: 800; cursor: pointer; }

        /* --- LAYOUT --- */
        .sidebar { width: 280px; background: #0d111c; height: 100vh; position: fixed; border-right: 1px solid rgba(255,255,255,0.05); padding: 30px 20px; z-index: 1000; }
        .main-content { margin-left: 280px; width: calc(100% - 280px); transition: 0.3s; }
        .menu-item { padding: 14px 18px; border-radius: 15px; cursor: pointer; color: #94a3b8; margin-bottom: 8px; display: flex; align-items: center; gap: 12px; }
        .menu-item.active { background: rgba(99, 102, 241, 0.1); color: white; }

        .section { display: none; padding: 40px; animation: fadeIn 0.4s ease; }
        .section.active { display: block; }

        /* --- TABLES & CARDS --- */
        .admin-card { background: rgba(255, 255, 255, 0.03); border-radius: 20px; padding: 25px; border: 1px solid rgba(255,255,255,0.05); overflow-x: auto; }
        .data-table { width: 100%; border-collapse: collapse; margin-top: 15px; min-width: 600px; }
        .data-table th { text-align: left; color: var(--primary); padding-bottom: 15px; font-size: 14px; }
        .data-table td { padding: 12px 0; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 13px; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        @media (max-width: 992px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; width: 100%; padding-bottom: 80px; }
            .section { padding: 20px; }
        }
    </style>
</head>
<body>

<div id="authOverlay">
    <div class="auth-card" id="loginBox">
        <h2 style="margin-bottom: 25px;">KIRISH</h2>
        <input type="email" id="logEmail" class="input-box" placeholder="Email">
        <input type="password" id="logPass" class="input-box" placeholder="Parol">
        <button class="auth-btn" onclick="login()">Kirish</button>
        <p onclick="toggleAuth(false)" style="margin-top: 15px; cursor:pointer; color: #94a3b8; font-size: 0.9rem;">Yangi hisob ochish</p>
    </div>

    <div class="auth-card" id="regBox" style="display: none;">
        <h2 style="margin-bottom: 25px;">REGISTRATSIYA</h2>
        <input type="text" id="regName" class="input-box" placeholder="Ismingiz">
        <input type="email" id="regEmail" class="input-box" placeholder="Email">
        <input type="password" id="regPass" class="input-box" placeholder="Parol">
        <button class="auth-btn" onclick="register()">Ro'yxatdan o'tish</button>
        <p onclick="toggleAuth(true)" style="margin-top: 15px; cursor:pointer; color: #94a3b8; font-size: 0.9rem;">Kirishga qaytish</p>
    </div>
</div>

<div id="app" style="display: none;">
    <div class="sidebar">
        <h2 style="color: var(--primary); margin-bottom: 30px;">ZAMON AC</h2>
        <div class="menu-item active" onclick="showSection('home', this)">ðŸ“š Kurslar</div>
        <div class="menu-item" onclick="showSection('profile', this)">ðŸ‘¤ Profilim</div>
        <div id="adminMenu" class="menu-item" style="display:none; color: #fbbf24;" onclick="showSection('adminPanel', this)">ðŸ›¡ Admin Panel</div>
        <div class="menu-item" onclick="location.reload()" style="margin-top: 50px; color: var(--accent);">ðŸšª Chiqish</div>
    </div>

    <div class="main-content">
        <div id="home" class="section active">
            <h2>Xush kelibsiz!</h2>
            <p style="opacity: 0.6;">Bugun qanday bilim olamiz?</p>
        </div>

        <div id="adminPanel" class="section">
            <h2 style="margin-bottom: 10px;">ðŸ›¡ Boshqaruv Paneli</h2>
            <p style="margin-bottom: 30px; opacity: 0.5;">Foydalanuvchilar va kirish ma'lumotlari</p>
            
            <div class="admin-card">
                <h3>Barcha Foydalanuvchilar</h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Ism</th>
                            <th>Email</th>
                            <th>Parol (Shifrlanmagan)</th>
                            <th>Rol</th>
                        </tr>
                    </thead>
                    <tbody id="userTableBody"></tbody>
                </table>
            </div>

            <div class="admin-card" style="margin-top: 30px;">
                <h3>Oxirgi Kirishlar (Logs)</h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Email</th>
                            <th>Vaqt</th>
                            <th>Holat</th>
                        </tr>
                    </thead>
                    <tbody id="logsTableBody"></tbody>
                </table>
            </div>
        </div>

        <div id="profile" class="section">
            <div class="admin-card">
                <h2 id="profNameDisplay">...</h2>
                <p id="profEmailDisplay" style="opacity: 0.6;"></p>
            </div>
        </div>
    </div>
</div>

<script>
    let currentUser = null;

    function toggleAuth(isLogin) {
        document.getElementById('loginBox').style.display = isLogin ? 'block' : 'none';
        document.getElementById('regBox').style.display = isLogin ? 'none' : 'block';
    }

    // REGISTRATSIYA
    function register() {
        const name = document.getElementById('regName').value;
        const email = document.getElementById('regEmail').value;
        const pass = document.getElementById('regPass').value;

        if(!name || !email || !pass) return alert("Hamma maydonni to'ldiring!");

        let users = JSON.parse(localStorage.getItem('z_users') || '[]');
        if(users.find(u => u.email === email)) return alert("Bu email band!");

        users.push({ name, email, pass, role: 'student' });
        localStorage.setItem('z_users', JSON.stringify(users));
        alert("Siz muvaffaqiyatli ro'yxatdan o'tdingiz!");
        toggleAuth(true);
    }

    // KIRISH
    function login() {
        const email = document.getElementById('logEmail').value;
        const pass = document.getElementById('logPass').value;

        // Admin shortcut
        if(email === 'admin@zamon.uz' && pass === '777') {
            saveLog(email, "Muvaffaqiyatli (Admin)");
            startApp({ name: 'Admin', email: 'admin@zamon.uz', role: 'admin' });
            return;
        }

        let users = JSON.parse(localStorage.getItem('z_users') || '[]');
        let user = users.find(u => u.email === email && u.pass === pass);

        if(user) {
            saveLog(email, "Muvaffaqiyatli");
            startApp(user);
        } else {
            saveLog(email || "Noma'lum", "Xato urinish");
            alert("Email yoki parol noto'g'ri!");
        }
    }

    function saveLog(email, status) {
        let logs = JSON.parse(localStorage.getItem('z_logs') || '[]');
        logs.unshift({ email, time: new Date().toLocaleString(), status });
        localStorage.setItem('z_logs', JSON.stringify(logs.slice(0, 50)));
    }

    function startApp(user) {
        currentUser = user;
        document.getElementById('authOverlay').style.display = 'none';
        document.getElementById('app').style.display = 'block';
        
        document.getElementById('profNameDisplay').innerText = user.name;
        document.getElementById('profEmailDisplay').innerText = user.email;

        if(user.role === 'admin') {
            document.getElementById('adminMenu').style.display = 'flex';
        }
    }

    function showSection(id, el) {
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelectorAll('.menu-item').forEach(m => m.classList.remove('active'));
        if(el) el.classList.add('active');

        if(id === 'adminPanel') renderAdminData();
    }

    // ADMINGA MA'LUMOTLARNI CHIQARISH
    function renderAdminData() {
        // Foydalanuvchilar jadvali
        const users = JSON.parse(localStorage.getItem('z_users') || '[]');
        const userTable = document.getElementById('userTableBody');
        userTable.innerHTML = users.map(u => `
            <tr>
                <td>${u.name}</td>
                <td>${u.email}</td>
                <td style="color: #fbbf24;">${u.pass}</td>
                <td>${u.role}</td>
            </tr>
        `).join('');

        // Loglar jadvali
        const logs = JSON.parse(localStorage.getItem('z_logs') || '[]');
        const logsTable = document.getElementById('logsTableBody');
        logsTable.innerHTML = logs.map(l => `
            <tr>
                <td>${l.email}</td>
                <td>${l.time}</td>
                <td style="color: ${l.status.includes('Xato') ? 'var(--accent)' : '#10b981'}">${l.status}</td>
            </tr>
        `).join('');
    }
</script>
</body>
</html>